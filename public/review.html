<!-- review.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Review Avalon Games</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <h2>Review Your Avalon Games</h2>
        <div id="game-list" class="game-list"></div>
        <button class="back-btn" onclick="window.location.href='index.html'">Back</button>
    </div>
    <script>
        // Check admin login
        const adminName = localStorage.getItem('avalon_admin_name');
        if (!adminName) {
            window.location.href = 'admin.html';
        }

        const gameListDiv = document.getElementById('game-list');
        const div = document.createElement('div');
        div.className = 'game-item';
        div.innerHTML = `
            <b>Game Code:</b> 124<br>
            <b>Created:</b> 2025.09.07 <br>
            <b>Players:</b> gemini, nano banana, claude, minimax, openai, deepseek, guigui<br>
            <b>State:</b> blue wins
          `;
        gameListDiv.appendChild(div);
        const div2 = document.createElement('div');
        div2.className = 'game-item';
        div2.innerHTML = `
            <b>Game Code:</b> 13524<br>
            <b>Created:</b> 2025.09.08 <br>
            <b>Players:</b> gemini, nano banana, danini, minimax, openai, deepseek, guigui<br>
            <b>State:</b> blue wins
          `;
        gameListDiv.appendChild(div2);
        // db.collection('games')
        //     .where('admin', '==', adminName)
        //     .orderBy('createdAt', 'desc')
        //     .get()
        //     .then(snapshot => {
        //         if (snapshot.empty) {
        //             gameListDiv.innerHTML = "<p>No games found for this admin.</p>";
        //             return;
        //         }
        //         snapshot.forEach(doc => {
        //             const data = doc.data();
        //             const div = document.createElement('div');
        //             div.className = 'game-item';
        //             div.innerHTML = `
        //     <b>Game Code:</b> ${data.gameCode}<br>
        //     <b>Game ID:</b> ${doc.id}<br>
        //     <b>Created:</b> ${data.createdAt && data.createdAt.toDate ? data.createdAt.toDate().toLocaleString() : 'N/A'}<br>
        //     <b>Players:</b> ${data.players.map(p => p.name).join(', ')}<br>
        //     <b>State:</b> ${data.state}
        //   `;
        //             gameListDiv.appendChild(div);
        //         });
        //     })
        //     .catch(err => {
        //         gameListDiv.innerHTML = `<p style="color:#ff5252;">Error: ${err.message}</p>`;
        //     });
    </script>
</body>

</html>